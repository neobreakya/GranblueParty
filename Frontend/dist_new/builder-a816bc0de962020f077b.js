"use strict";(self.webpackChunkgbf_frontend=self.webpackChunkgbf_frontend||[]).push([[624],{9290(t,e,a){a.r(e),a.d(e,{default:()=>V});var s=a(9204),o=a(1770),r=a(5943),i=a(9335);const l={methods:{clickAttack(){this.$store.commit("addActionAttack")},clickUndo(){this.$store.commit("undoAction")},clickClear(){this.$store.commit("clearActions")}},computed:{...(0,i.mapState)({party_mode:t=>t.party_builder.party_mode}),getActionsText(){return this.$store.getters.getActionsText}}};var n=a(4486);const c=(0,n.A)(l,function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-col"},[e("span",{staticClass:"flex flex-row justify-between items-center mt-1"},[e("button",{staticClass:"btn btn-blue",on:{click:t.clickAttack}},[t._v("Attack")]),t.party_mode===t.$MODE.Edit?e("p",{staticClass:"text-sm text-center mx-2"},[t._v("Uncheck "),e("i",[t._v("Edit Grid")]),t._v(" to click and add skills and summons below")]):t._e(),e("span",{staticClass:"flex flex-row"},[e("button",{staticClass:"btn btn-white mr-1",on:{click:t.clickUndo}},[t._v("Undo")]),e("button",{staticClass:"btn btn-red",on:{click:t.clickClear}},[t._v("Clear")])])]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.getActionsText,expression:"getActionsText"}],staticClass:"w-full h-full appearance-none text-primary bg-primary",attrs:{readonly:""},domProps:{value:t.getActionsText},on:{input:function(e){e.target.composing||(t.getActionsText=e.target.value)}}})])},[],!1,null,null,null).exports;var u=a(5804),p=a(84);const m={computed:{description:{get(){return this.$store.state.party_builder.description},set(t){this.$store.commit("setDescription",t)}}}},d=(0,n.A)(m,function(){var t=this;return(0,t._self._c)("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"w-full h-full appearance-none text-primary bg-secondary",domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})},[],!1,null,null,null).exports;var h=a(253);const _=new s.A.LocalStorageMgt("PartyBuilder"),y={atk:0,atk_cap:0,hp:0,da:0,ta:0,crit:0,ca_dmg:0,ca_cap:0,chainburst_dmg:0,chainburst_cap:0,stamina:0,enmity:0,supplemental_dmg:0},w={fire:{superior:"wind",weak:"water"},wind:{superior:"earth",weak:"fire"},earth:{superior:"water",weak:"wind"},water:{superior:"fire",weak:"earth"},light:{superior:"dark",weak:""},dark:{superior:"light",weak:""},none:{superior:"",weak:""}},v={components:{Dropdown:r.A},data:()=>({enemy_element:"water"}),methods:{getElemSuperiority(t){return"none"===this.enemy_element?0:w[t].superior===this.enemy_element?.5:w[t].weak===this.enemy_element?-.25:0},getSummonAuras(t){let e={elemental:Object.assign({},y),normal:Object.assign({},y),optimus:Object.assign({},y),omega:Object.assign({},y),mysterious:Object.assign({},y),seraphic:Object.assign({},y),ranko:Object.assign({},y)};return[this.summons[0],this.summons[5]].forEach(a=>{if(!s.A.isEmpty(a)&&void 0!==a.current_data)for(let s of a.data[a.current_data])t!==s.element&&"any"!==s.element||(e[s.aura_type][s.stat]+=s.percent/100)}),this.summons.slice(1,5).forEach(a=>{if(!s.A.isEmpty(a)&&void 0!==a.current_data)for(let s of a.data[a.current_data])"sub"!==s.slot||t!==s.element&&"any"!==s.element||(e[s.aura_type][s.stat]+=s.percent/100)}),this.summons.slice(6,8).forEach(a=>{if(!s.A.isEmpty(a)&&void 0!==a.current_data)for(let s of a.data[a.current_data])"sub"!==s.slot||t!==s.element&&"any"!==s.element||(e[s.aura_type][s.stat]+=s.percent/100)}),e}},computed:{...(0,i.mapState)({characters:t=>t.party_builder.characters,summons:t=>t.party_builder.summons,weapons:t=>t.party_builder.weapons}),percentHP:{get(){return this.$store.state.party_builder.percent_HP},set(t){this.$store.commit("setPercentHP",t)}},getStatsForCharacters(){let t=[];for(let e of this.characters)if(!s.A.isEmpty(e)){let a={name:e.nameen,ratio:{elemental:Object.assign({},y),normal:Object.assign({},y),optimus:Object.assign({},y),omega:Object.assign({},y),ex:Object.assign({},y),mysterious:Object.assign({},y),seraphic:Object.assign({},y)}},o=h.A.e.data[e.elementid].name.toLowerCase();"any"===o&&(o=s.A.isEmpty(this.weapons[0])?"dark":h.A.e.data[this.weapons[0].elementid].name.toLowerCase());const r=h.A.ra.data[e.raceid].name.toLowerCase(),i=e.weapontypeid.flatMap(t=>[h.A.w.data[t].name.toLowerCase()]);for(let t=0;t<this.weapons.length;t++){const e=this.weapons[t];if(!s.A.isEmpty(e))for(let e of this.$store.getters.getWeaponsCurrentData[t].flat()){let t=!0;if(e.restriction)for(let[a,s]of Object.entries(e.restriction))if("element"===a){if(!s.some(t=>t===o)){t=!1;break}}else if("race"===a){if(!s.some(t=>t===r)){t=!1;break}}else if("weapon"===a&&!s.some(t=>i.some(e=>t===e))){t=!1;break}!0===t&&(a.ratio[e.aura_type][e.stat]+=e.value)}}const l=this.getSummonAuras(o),n=this.getElemSuperiority(o);a.elem_atk=1+n+l.elemental.atk,a.normal_atk=(1+a.ratio.optimus.atk*(1+l.optimus.atk)+a.ratio.normal.atk+a.ratio.normal.enmity+a.ratio.normal.stamina+l.normal.atk)*(1+a.ratio.optimus.enmity*(1+l.optimus.atk))*(1+a.ratio.optimus.stamina*(1+l.optimus.atk)),a.omega_atk=(1+a.ratio.omega.atk*(1+l.omega.atk))*(1+a.ratio.omega.enmity*(1+l.omega.atk))*(1+a.ratio.omega.stamina*(1+l.omega.atk)),a.ex_atk=(1+a.ratio.ex.atk+a.ratio.mysterious.atk*(1+l.ranko.atk))*(1+a.ratio.ex.enmity)*(1+a.ratio.ex.stamina),a.fixed_atk_mod=0,a.normal_omega_ex_atk=a.normal_atk*a.omega_atk*a.ex_atk-a.fixed_atk_mod,a.chara_atk=1*(1+(!0===e.haspring?.1:0)),a.crit=0,(n>0||"none"===this.enemy_element)&&(a.crit=a.ratio.omega.crit*(1+l.omega.atk)+a.ratio.optimus.crit*(1+l.optimus.atk)+a.ratio.normal.crit),a.da=a.ratio.omega.da*(1+l.omega.atk)+a.ratio.optimus.da*(1+l.optimus.atk)+a.ratio.normal.da,a.ta=a.ratio.omega.ta*(1+l.omega.atk)+a.ratio.optimus.ta*(1+l.optimus.atk)+a.ratio.normal.ta,t.push(a)}return t}},watch:{enemy_element(){_.setValue("enemy_element",this)}},mounted(){_.getValue(this,"enemy_element")}},b=(0,n.A)(v,function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-col"},[e("div",{staticClass:"flex flex-row flex-wrap items-center"},[e("label",{staticClass:"mr-2"},[t._v(" Enemy Element "),e("dropdown",{model:{value:t.enemy_element,callback:function(e){t.enemy_element=e},expression:"enemy_element"}},[e("option",{attrs:{value:"fire"}},[t._v("Fire")]),e("option",{attrs:{value:"wind"}},[t._v("Wind")]),e("option",{attrs:{value:"earth"}},[t._v("Earth")]),e("option",{attrs:{value:"water"}},[t._v("Water")]),e("option",{attrs:{value:"light"}},[t._v("Light")]),e("option",{attrs:{value:"dark"}},[t._v("Dark")]),e("option",{attrs:{value:"none"}},[t._v("None")])])],1),e("label",[t._v(" HP% "),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.percentHP,expression:"percentHP",modifiers:{number:!0}}],staticClass:"input",staticStyle:{width:"5ch"},domProps:{value:t.percentHP},on:{keydown:[function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"arrow-up",void 0,e.key,void 0))return null;t.percentHP++},function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"arrow-down",void 0,e.key,void 0))return null;t.percentHP--}],input:function(e){e.target.composing||(t.percentHP=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]),t.getStatsForCharacters.length>0?e("div",{staticClass:"overflow-y-auto"},[e("table",{staticClass:"table"},[t._m(0),e("tbody",t._l(t.getStatsForCharacters,function(a,s){return e("tr",{key:s},[e("td",{staticClass:"truncate",staticStyle:{"max-width":"4rem"}},[t._v(t._s(a.name))]),e("td",[t._v(t._s((100*a.elem_atk).toFixed(0))+"%")]),e("td",[t._v(t._s((100*a.normal_atk).toFixed(0))+"%")]),e("td",[t._v(t._s((100*a.omega_atk).toFixed(0))+"%")]),e("td",[t._v(t._s((100*a.ex_atk).toFixed(0))+"%")]),e("td",[t._v(t._s((100*a.chara_atk).toFixed(0))+"%")]),e("td",[t._v(t._s(Math.floor(100*a.crit))+"%")]),e("td",[t._v(t._s(Math.min(75,(100*a.da).toFixed(0)))+"%")]),e("td",[t._v(t._s(Math.min(75,(100*a.ta).toFixed(0)))+"%")])])}),0)])]):t._e(),t._m(1)])},[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th"),e("th",[t._v("Elem")]),e("th",[e("abbr",{attrs:{title:"Normal and Optimus modifiers ratio"}},[t._v("Norm")])]),e("th",[e("abbr",{attrs:{title:"Omega"}},[t._v("Ω")])]),e("th",[t._v("Ex")]),e("th",[e("abbr",{attrs:{title:"Character-specific unique attack ratio"}},[t._v("Chara")])]),e("th",[e("abbr",{attrs:{title:"Critical damage ratio"}},[t._v("Crit")])]),e("th",[e("abbr",{attrs:{title:"Double attack ratio"}},[t._v("DA")])]),e("th",[e("abbr",{attrs:{title:"Triple attack ratio"}},[t._v("TA")])])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"mt-4"},[e("span",{staticClass:"tag bg-red-500"},[t._v("Warning")]),t._v(" Some things might still be missing. Mouse over the skills and summons to see what's already implemented. ")])}],!1,null,null,null).exports;var f=a(8044),k=a(7314),g=a(217);const x={computed:{...(0,i.mapState)({weapons:t=>t.party_builder.weapons}),englishNames(){return this.$store.getters.getLang===g.Y.EN},getWeaponKeys(){let t=[];for(const e of this.weapons)if(!s.A.isEmpty(e)){let a={name:this.englishNames?e.nameen:e.namejp,keys:[]};for(const t of e.keys)s.A.isEmpty(t)||a.keys.push(t.desc);a.keys.length>0&&t.push(a)}return t}}},C=(0,n.A)(x,function(){var t=this,e=t._self._c;return e("div",[t._l(t.getWeaponKeys,function(a,s){return e("div",{key:"w"+s,staticClass:"mb-3"},[e("b",[t._v(t._s(a.name))]),e("ul",{staticClass:"list-disc ml-4"},t._l(a.keys,function(a,s){return e("li",{key:"k"+s},[t._v(t._s(a))])}),0)])}),e("br")],2)},[],!1,null,null,null).exports;var A=a(2334),P=a(4744),$=a(555),E=a(1489),S=a(5836);{let t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";let e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}const M={model:{prop:"show",event:"close"},components:{Modal:S.A},props:{show:{type:Boolean,required:!0},url:{type:String}},data:()=>({input_url:"",video_id:null,player:null,error_message:""}),methods:{fetchVideo(){if(this.input_url.length>0){if(this.video_id=this.getYouTubeId(this.input_url),null==this.video_id)return this.error_message="Invalid URL",void this.closePlayer();this.error_message="",null===this.player?this.player=new YT.Player("player",{height:"360",width:"640",videoId:this.video_id,rel:0}):this.player.cueVideoById(this.video_id)}},getYouTubeId(t){const e=t.match(/^(https?:)?(\/\/)?((www\.|m\.)?youtube(-nocookie)?\.com\/((watch)?\?(feature=\w*&)?vi?=|embed\/|vi?\/|e\/)|youtu.be\/)([\w\-]{10,20})/i);return e?e[9]:null},addVideo(){this.closePlayer(),this.video_id=this.getYouTubeId(this.input_url),this.$emit("add",this.video_id),this.$emit("close",!1)},removeVideo(){this.video_id=null,this.addVideo()},closePlayer(){this.player&&(this.player.destroy(),this.player=null)}},watch:{show(){if(!0===this.show){this.url?(this.video_id=this.url,this.input_url="https://www.youtube.com/watch?v="+this.url):(this.video_id=null,this.input_url=null);let t=this;this.$nextTick().then(()=>{t.$refs.url.focus()})}}}},B=(0,n.A)(M,function(){var t=this,e=t._self._c;return e("modal",{attrs:{show:t.show},on:{close:function(e){return t.$emit("close",!1)}},scopedSlots:t._u([{key:"header",fn:function(){return[e("h2",[t._v("Add a YouTube video")])]},proxy:!0}])},[e("form",{staticClass:"flex flex-row m-1 gap-x-4",on:{submit:function(e){return e.preventDefault(),t.fetchVideo()}}},[e("label",{staticClass:"flex flex-row whitespace-nowrap items-center gap-x-2 grow"},[t._v("URL "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.input_url,expression:"input_url"}],ref:"url",staticClass:"input w-full",attrs:{type:"text",placeholder:"YouTube URL",required:"",autofocus:""},domProps:{value:t.input_url},on:{input:function(e){e.target.composing||(t.input_url=e.target.value)}}})]),e("input",{staticClass:"btn btn-blue pt-2",attrs:{type:"submit",value:"Fetch"}})]),e("div",{staticClass:"flex justify-center",staticStyle:{height:"360px"}},[t._v(" "+t._s(t.error_message)+" "),e("div",{attrs:{id:"player"}})]),e("input",{staticClass:"btn btn-blue pt-2",attrs:{type:"button",value:"Add"},on:{click:function(e){return t.addVideo()}}}),t.url?e("input",{staticClass:"btn btn-red pt-2",attrs:{type:"button",value:"Remove"},on:{click:function(e){return t.removeVideo()}}}):t._e()])},[],!1,null,null,null).exports,O={components:{Checkbox:o.A,ContentCategories:A.A,Dropdown:r.A,LikeButton:P.A,ModalConfirm:$.A,ModalSelector:E.A,ModalYoutube:B},data:()=>({clipboard_text:"",new_party_modal:!1,save_as_modal:!1,delete_party_modal:!1,show_parties_modal:!1,add_video_modal:!1,reload_route:0}),methods:{clickPartyNew(){this.$store.commit("resetParty"),this.cleanURL()},cleanURL(){history.pushState(null,null,window.location.origin+window.location.pathname)},loadPartyFromModal(t){this.axios.get("/party/load/"+t).then(t=>this.loadParty(s.A.getPartyResponse(t))).catch(t=>this.$store.dispatch("addAxiosErrorMessage",t))},clickPartyShare(){const t="?p="+this.current_party+"#";this.clipboard_text=window.location.href.split("?")[0]+t;let e=this;this.$nextTick().then(()=>{document.getElementById("clipboardInput").select(),document.execCommand("copy"),e.clipboard_text="",e.$store.dispatch("addMessage",{message:"URL copied to clipboard"})})},clickPartyDelete(){this.current_party&&this.axios.post("/party/delete",{id:this.current_party}).then(()=>{this.clickPartyNew(),this.reloadParties(),this.$store.dispatch("addMessage",{message:"Party deleted successfully"})}).catch(t=>this.$store.dispatch("addAxiosErrorMessage",t))},addVideo(t){this.video_id=t&&t.length>0?t:null},clickPartySave(t=null){let e={classe:this.classe.classid,class_skills:s.A.isEmpty(this.classe.skills)?null:this.classe.skills.map(t=>t?t.skillid:null),characters:this.characters.map(t=>s.A.isEmpty(t)?null:t.characterid),characters_stars:this.characters.map(t=>s.A.isEmpty(t)?null:t.stars),characters_levels:this.characters.map(t=>s.A.isEmpty(t)?null:t.level),characters_pluses:this.characters.map(t=>s.A.isEmpty(t)?null:t.pluses),characters_prings:this.characters.map(t=>s.A.isEmpty(t)?null:t.haspring),summons:this.summons.map(t=>s.A.isEmpty(t)?null:t.summonid),summons_levels:this.summons.map(t=>s.A.isEmpty(t)?null:t.level),summons_pluses:this.summons.map(t=>s.A.isEmpty(t)?null:t.pluses),summons_stars:this.summons.map(t=>s.A.isEmpty(t)?null:t.stars),weapons:this.weapons.map(t=>s.A.isEmpty(t)?null:t.weaponid),weapons_levels:this.weapons.map(t=>s.A.isEmpty(t)?null:t.level),weapons_pluses:this.weapons.map(t=>s.A.isEmpty(t)?null:t.pluses),weapons_skill_levels:this.weapons.map(t=>s.A.isEmpty(t)?null:t.sklevel),weapons_skill_names:this.weapons.map(t=>s.A.isEmpty(t)?null:t.keys.map(t=>t?t.name:null)),weapons_stars:this.weapons.map(t=>s.A.isEmpty(t)?null:t.stars),actions:this.actions.map(t=>[t.sourceSlot-1,t.skillSlot-1,t.type])};this.axios.post("/party/save",{id:t,name:this.party_name,data:e,content:this.content,isPublic:this.isPublic,desc:this.description,video:this.video_id}).then(t=>{this.current_party=t.data.id,this.team_owner=this.$store.getters.getUserId,this.reloadParties(),this.$store.dispatch("addMessage",{message:"Party saved successfully"})}).catch(t=>this.$store.dispatch("addAxiosErrorMessage",t))},reloadParties(){this.reload_route++},loadParty(t){if(!s.A.isEmpty(this.$route.query.p)){const e=parseInt(this.$route.query.p,10);t.id!==e&&this.cleanURL()}this.$store.dispatch("loadParty",t)}},computed:{...(0,i.mapState)({classe:t=>t.party_builder.classe,characters:t=>t.party_builder.characters,summons:t=>t.party_builder.summons,weapons:t=>t.party_builder.weapons,actions:t=>t.party_builder.actions,description:t=>t.party_builder.description}),isUserLogged(){return null!==this.$store.getters.getUserId},content:{get(){return this.$store.state.party_builder.content},set(t){this.$store.commit("setContent",t)}},isPublic:{get(){return this.$store.state.party_builder.isPublic},set(t){this.$store.commit("setPublic",t)}},team_owner:{get(){return this.$store.state.party_builder.team_owner},set(t){this.$store.commit("setTeamOwner",t)}},party_name:{get(){return this.$store.state.party_builder.party_name},set(t){this.$store.commit("setPartyName",t)}},current_party:{get(){return this.$store.state.party_builder.current_party},set(t){this.$store.commit("setCurrentParty",t)}},video_id:{get(){return this.$store.state.party_builder.video_id},set(t){this.$store.commit("setVideoId",t)}},isMyParty(){return this.team_owner===this.$store.getters.getUserId},cannotBePublic(){return null===this.content||s.A.isEmpty(this.weapons[0])},getCategories:()=>[{name:"Name",isColumn:!0,isFilter:!1,key:"n"},{name:"Element",isColumn:!0,isFilter:!0,key:"e"},{name:"Public",isColumn:!0,isFilter:!0,key:"pub"}]},watch:{"$store.getters.getUserId"(t){null!==t&&this.reloadParties()}},serverPrefetch(){let t=[];if(s.A.isEmpty(this.$route.query.l)){if(!s.A.isEmpty(this.$route.query.p)){const e=parseInt(this.$route.query.p,10);t.push(this.axios.get("/party/load/"+e).then(t=>{this.loadParty(s.A.getPartyResponse(t));const a=t.data.updated?t.data.updated:"0";this.$ssrContext.head_image="https://www.granblue.party/previews/party/party_"+e+"."+a+".jpg"}).catch(t=>this.$store.dispatch("addMessage",{title:"Error",message:"Party not found"})))}}else{const e=JSON.parse(this.$route.query.l),a={classe:e.p,class_skills:e.ps,characters:e.c,summons:e.s,weapons:e.w};(!e.v||e.v<6)&&this.$emit("update-bookmarklet"),t.push(this.axios.post("/party/load",a).then(t=>this.loadParty({data:t.data,characters_levels:e.cl,characters_stars:e.cs,characters_pluses:e.cp,characters_prings:e.cwr,summons_levels:e.sl,summons_stars:e.ss,summons_pluses:e.sp,weapons_levels:e.wll,weapons_skill_levels:e.wl,weapons_skill_names:e.wsn,weapons_pluses:e.wp})).catch(t=>this.$store.dispatch("addAxiosErrorMessage",t)))}return Promise.all(t)}},j=(0,n.A)(O,function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-col gap-4"},[t.isUserLogged?e("div",{staticClass:"flex flex-row flex-wrap items-center gap-2"},[e("button",{staticClass:"btn btn-red",on:{click:function(e){t.new_party_modal=!0}}},[e("fa-icon",{staticClass:"text-xl",attrs:{icon:["fas","file"]}}),t._v(" New Party ")],1),e("button",{staticClass:"btn btn-blue",on:{click:function(e){t.show_parties_modal=!0}}},[e("fa-icon",{staticClass:"text-xl",attrs:{icon:["fas","folder-open"]}}),t._v(" Load… ")],1),e("button",{staticClass:"btn btn-blue",attrs:{disabled:!t.isMyParty},on:{click:function(e){return t.clickPartySave(t.current_party)}}},[e("fa-icon",{staticClass:"text-xl",attrs:{icon:["fas","save"]}}),t._v(" Save ")],1),e("button",{staticClass:"btn btn-blue",on:{click:function(e){t.save_as_modal=!0}}},[e("fa-icon",{staticClass:"text-xl",attrs:{icon:["fas","file-pen"]}}),t._v(" Save As… ")],1),e("button",{staticClass:"btn btn-red",attrs:{disabled:!t.isMyParty},on:{click:function(e){t.delete_party_modal=!0}}},[e("fa-icon",{staticClass:"text-xl",attrs:{icon:["fas","trash"]}}),t._v(" Delete ")],1),e("button",{staticClass:"btn btn-blue",attrs:{disabled:!t.isMyParty},on:{click:function(e){t.add_video_modal=!0}}},[e("fa-icon",{staticClass:"text-xl",attrs:{icon:["fab","youtube"]}}),t._v(" Add Video ")],1),e("button",{staticClass:"btn btn-blue",attrs:{disabled:!t.isMyParty},on:{click:function(e){return t.clickPartyShare()}}},[e("fa-icon",{staticClass:"text-xl",attrs:{icon:["fas","share-alt"]}}),t._v(" Share ")],1),null===t.current_party?e("span",[t._v("(unsaved)")]):t._e()]):t._e(),e("div",{staticClass:"flex flex-row flex-wrap items-center gap-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.party_name,expression:"party_name"}],staticClass:"input w-52",attrs:{type:"text",placeholder:"Party name",maxlength:"64"},domProps:{value:t.party_name},on:{input:function(e){e.target.composing||(t.party_name=e.target.value)}}}),e("label",[t._v(" Category "),e("content-categories",{model:{value:t.content,callback:function(e){t.content=t._n(e)},expression:"content"}})],1),t.isUserLogged?e("checkbox",{attrs:{disabled:t.cannotBePublic,title:t.cannotBePublic?"Parties uncategorized or without a main weapon cannot be made public":"Make this team visible in the Teams section"},model:{value:t.isPublic,callback:function(e){t.isPublic=e},expression:"isPublic"}},[t._v(" Public Team ")]):t._e(),t.video_id?e("a",{attrs:{href:"https://www.youtube.com/watch?v="+t.video_id,target:"_blank",title:"Open YouTube video"}},[e("fa-icon",{staticClass:"text-4xl",attrs:{icon:["fab","youtube"]}})],1):t._e(),e("like-button",{attrs:{teamId:this.current_party}})],1),e("modal-selector",{key:t.reload_route,attrs:{route:"/party/list",categories:t.getCategories,canUnselect:!1},on:{"item-selected":t.loadPartyFromModal},model:{value:t.show_parties_modal,callback:function(e){t.show_parties_modal=e},expression:"show_parties_modal"}}),e("modal-confirm",{attrs:{confirm:t.clickPartyNew,text:"This will clear the current party and start a new one.",button:"New Party"},model:{value:t.new_party_modal,callback:function(e){t.new_party_modal=e},expression:"new_party_modal"}}),e("modal-confirm",{attrs:{confirm:t.clickPartySave,text:"This will create a new "+(this.isPublic?"public":"private")+" Party"+(this.party_name?" called '"+this.party_name+"'.":" with no name."),button:"Save new Party"},model:{value:t.save_as_modal,callback:function(e){t.save_as_modal=e},expression:"save_as_modal"}}),e("modal-confirm",{attrs:{confirm:t.clickPartyDelete,text:"This will permanently delete this party from your account.",button:"Delete Party"},model:{value:t.delete_party_modal,callback:function(e){t.delete_party_modal=e},expression:"delete_party_modal"}}),e("modal-youtube",{attrs:{url:t.video_id},on:{add:t.addVideo},model:{value:t.add_video_modal,callback:function(e){t.add_video_modal=e},expression:"add_video_modal"}}),e("input",{directives:[{name:"show",rawName:"v-show",value:t.clipboard_text.length>0,expression:"clipboard_text.length > 0"}],attrs:{id:"clipboardInput",readonly:"",type:"text"},domProps:{value:t.clipboard_text}})],1)},[],!1,null,null,null).exports,T=new s.A.LocalStorageMgt("PartyBuilder"),L={components:{Checkbox:o.A,Dropdown:r.A,GroupActions:c,GroupClass:u.A,GroupDescription:d,GroupCharacters:p.A,GroupPartyStats:b,GroupSummons:f.A,GroupWeapons:k.A,GroupWeaponKeys:C,MyParties:j},head:{title:"Granblue.Party - Party Builder",desc:"Build and share Granblue Fantasy teams and grids with your friends.",image:"https://www.granblue.party/img/card_party.jpg",keywords:"party builder, team builder, grid, characters, summons, weapons, share, import, bookmarklet, damage calculator, OTK"},data:()=>({show_help:!1,show_level:!0,show_rings:!0,arcarum_weapons:!1,show_tab:3,layout:"square"}),methods:{updateBookmarklet(){this.show_bookmarklet=!0,this.show_update_bookmarklet=!0}},computed:{party_mode:{get(){return this.$store.state.party_builder.party_mode},set(t){this.$store.commit("setPartyMode",t)}},show_bookmarklet:{get(){return this.$store.state.party_builder.show_bookmarklet},set(t){this.$store.commit("setShowBookmarklet",t)}},show_update_bookmarklet:{get(){return this.$store.state.party_builder.show_update_bookmarklet},set(t){this.$store.commit("setShowUpdateBookmarklet",t)}}},watch:{show_tab(){T.setValue("show_tab",this)},show_level(){T.setValue("show_level",this)},show_rings(){T.setValue("show_rings",this)},arcarum_weapons(){T.setValue("arcarum_weapons",this)},layout(){T.setValue("layout",this)}},mounted(){T.getValue(this,"show_tab"),T.getValue(this,"show_level"),T.getValue(this,"show_rings"),T.getValue(this,"arcarum_weapons"),T.getValue(this,"layout"),this.$store.commit("setPartyMode",this.$MODE.Edit)}},V=(0,n.A)(L,function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-col"},[e("div",{staticClass:"flex flex-row flex-wrap items-center gap-2 mb-4"},[e("button",{staticClass:"btn",class:t.show_bookmarklet?"btn-blue":"btn-white",on:{click:function(e){t.show_bookmarklet=!t.show_bookmarklet,t.show_help=!1}}},[e("fa-icon",{staticClass:"text-xl",attrs:{icon:["fas","info-circle"]}}),t._v(" Get Export Bookmarklet ")],1),e("button",{staticClass:"btn",class:t.show_help?"btn-blue":"btn-white",on:{click:function(e){t.show_help=!t.show_help,t.show_bookmarklet=!1}}},[e("fa-icon",{staticClass:"text-xl",attrs:{icon:["fas","info-circle"]}}),t._v(" Usage ")],1),e("label",{staticClass:"flex flex-row items-center gap-2"},[e("span",[t._v("Layout")]),e("dropdown",{model:{value:t.layout,callback:function(e){t.layout=e},expression:"layout"}},[e("option",{attrs:{value:"square"}},[t._v("Square")]),e("option",{attrs:{value:"wide"}},[t._v("Wide")]),e("option",{attrs:{value:"compact"}},[t._v("Compact")])])],1),e("checkbox",{attrs:{value:t.party_mode===t.$MODE.Edit},on:{input:function(e){t.party_mode=e?t.$MODE.Edit:t.$MODE.Action}}},[t._v("Edit Grid")]),e("checkbox",{model:{value:t.show_level,callback:function(e){t.show_level=e},expression:"show_level"}},[t._v("Levels and pluses")]),e("checkbox",{model:{value:t.show_rings,callback:function(e){t.show_rings=e},expression:"show_rings"}},[t._v("Perpetuity Rings")]),e("checkbox",{model:{value:t.arcarum_weapons,callback:function(e){t.arcarum_weapons=e},expression:"arcarum_weapons"}},[t._v("Arcarum weapon slots")])],1),t.show_bookmarklet?e("div",{staticClass:"bg-secondary self-center rounded p-4 mb-2"},[t.show_update_bookmarklet?e("div",[e("h2",[t._v("A new version of the Bookmarklet is available")]),t._m(0)]):e("div",[e("h2",[t._v("What is this")]),e("p",{staticClass:"pb-4"},[t._v(" Open a Party page in GBF and export the class, characters, summons and weapons here in a single click. ")]),e("h2",[t._v("How to install")]),t._m(1)]),e("h2",[t._v("More information")]),t._m(2)]):e("div"),t.show_help?e("div",{staticClass:"bg-secondary self-center rounded p-4 mb-2"},[e("h2",[t._v("My Parties")]),t._m(3),e("h2",[t._v("The Edit checkbox")]),t._m(4),e("h2",[t._v("Drag and Drop support")]),t._m(5),e("h2",[t._v("Customize your party")]),t._m(6)]):t._e(),e("my-parties",{on:{"update-bookmarklet":function(e){return t.updateBookmarklet()}}}),e("div",{staticClass:"flex flex-row flex-wrap justify-center items-start gap-2"},[e("div",{staticClass:"flex flex-wrap justify-center items-center gap-2",class:"compact"===t.layout?"flex-col":"flex-row"},[e("div",{staticClass:"flex flex-row gap-2"},[e("group-class"),e("group-characters",{attrs:{showLevel:t.show_level,showRing:t.show_rings}})],1),e("group-summons",{attrs:{showLevel:t.show_level}})],1),"square"===t.layout?e("hr",{staticClass:"w-full invisible"}):t._e(),e("group-weapons",{attrs:{showLevel:t.show_level,showArcarum:t.arcarum_weapons}}),"wide"===t.layout?e("hr",{staticClass:"w-full invisible"}):t._e(),e("span",{staticClass:"flex flex-col w-full self-stretch",class:"wide"===t.layout?"":"md:w-128"},[e("div",{staticClass:"self-start flex flex-row flex-wrap border-primary border-b font-bold w-full"},[e("a",{staticClass:"px-4 py-2 text-primary cursor-pointer rounded-t whitespace-nowrap",class:0===t.show_tab?"bg-secondary":"",on:{click:function(e){t.show_tab=0}}},[t._v("Actions")]),e("a",{staticClass:"px-4 py-2 text-primary cursor-pointer rounded-t whitespace-nowrap",class:1===t.show_tab?"bg-secondary":"",on:{click:function(e){t.show_tab=1}}},[t._v("Stats")]),e("a",{staticClass:"px-4 py-2 text-primary cursor-pointer rounded-t whitespace-nowrap",class:2===t.show_tab?"bg-secondary":"",on:{click:function(e){t.show_tab=2}}},[t._v("Weapon Keys")]),e("a",{staticClass:"px-4 py-2 text-primary cursor-pointer rounded-t whitespace-nowrap",class:3===t.show_tab?"bg-secondary":"",on:{click:function(e){t.show_tab=3}}},[t._v("Description")])]),0===t.show_tab?e("group-actions",{staticClass:"grow w-full md:w-128"}):1===t.show_tab?e("div",{staticClass:"grow"},[e("group-party-stats")],1):2===t.show_tab?e("div",{staticClass:"grow"},[e("group-weapon-keys")],1):3===t.show_tab?e("div",{staticClass:"grow"},[e("group-description")],1):t._e()],1)],1)],1)},[function(){var t=this,e=t._self._c;return e("p",{staticClass:"pb-4"},[t._v(" You should update to the last version to benefit from an improved export."),e("br"),t._v(" All you need to do is to update your Bookmark in Chrome with the following JavaScript code: "),e("a",{attrs:{href:"https://github.com/Minimalist3/GBF-Bookmarklet/raw/master/bookmarklet.min.js",target:"_blank"}},[t._v("bookmarklet.min.js")]),t._v(". ")])},function(){var t=this,e=t._self._c;return e("p",{staticClass:"pb-4"},[t._v(" All you need is to create a new Bookmark in Chrome with the following JavaScript code: "),e("a",{attrs:{href:"https://github.com/Minimalist3/GBF-Bookmarklet/raw/master/bookmarklet.min.js",target:"_blank"}},[t._v("bookmarklet.min.js")]),t._v(". ")])},function(){var t=this,e=t._self._c;return e("p",{staticClass:"pb-4"},[t._v(" You can find the source code and a comprehensive Readme here: "),e("a",{attrs:{href:"https://github.com/Minimalist3/GBF-Bookmarklet",target:"_blank"}},[t._v("GBF-Bookmarklet")]),t._v(". ")])},function(){var t=this,e=t._self._c;return e("p",{staticClass:"pb-4"},[t._v(" By logging into your account, you can save and load as many parties as you want, then share the link to your friends."),e("br"),t._v(" Only you can modify your parties. When you click the Save button, people will automatically see the updated version. ")])},function(){var t=this,e=t._self._c;return e("p",{staticClass:"pb-4"},[t._v(" When the Edit checkbox is checked, you can add elements to your party."),e("br"),t._v(" Uncheck it to click on character skills and summons to add Actions. ")])},function(){var t=this,e=t._self._c;return e("p",{staticClass:"pb-4"},[t._v(" You can drag and drop character, summons and weapons to other slots."),e("br"),t._v(" If something is already at the destination, the two items will swap places. ")])},function(){var t=this,e=t._self._c;return e("p",{staticClass:"pb-4"},[t._v(" Set the uncap level of your party by clicking on the stars."),e("br"),t._v(" You can set a Perpetuity Ring on each character by clicking on the lower right corner of the portrait."),e("br"),t._v(" Click on the lock icon of the weapon skills to select a skill key. ")])}],!1,null,null,null).exports}}]);