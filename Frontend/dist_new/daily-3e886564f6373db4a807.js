"use strict";(self.webpackChunkgbf_frontend=self.webpackChunkgbf_frontend||[]).push([[802],{6497(t,s,e){e.r(s),e.d(s,{default:()=>f});var i=e(9204),a=e(3964),n=e(951);class r{constructor(t,s){this.name=t,this.data=s,this.raid_index=0}}const l=()=>({my_lists:[new r("Default list",[])],current_list_index:0,list_fetched:!1}),c={namespaced:!0,state:()=>l(),mutations:{setMyLists(t,s){t.my_lists=s},setCurrentListIndex(t,s){t.current_list_index=s},setListFetched(t,s){t.list_fetched=s},resetMyLists(t){Object.assign(t,l())}}},o=(0,n.gq)("daily_grind",c);var d=e(1770),h=e(5943);const u=new i.A.LocalStorageMgt("DailyGrind"),g=Object.assign({},a.A.CAT_STANDARD,a.A.CAT_IMPOSSIBLE,a.A.CAT_SOLO),_={components:{Checkbox:d.A,Dropdown:h.A},mixins:[o],head:{title:"Granblue.Party - Daily Grind",desc:"Choose the content you want to farm and click Next to grind!",image:"https://www.granblue.party/img/card_dailygrind.jpg",keywords:"raid, raids, host, magnafest, grind, farming"},data:()=>({isMagfes:!1,show_help:!1,editMode:!1,renameLists:!0,showTab:0,content:[{name:"Solo Content",data:a.A.CAT_SOLO,show:!0},{name:"Standard Raids",data:a.A.CAT_STANDARD,show:!0},{name:"Impossible Raids",data:a.A.CAT_IMPOSSIBLE,show:!0}]}),methods:{clickRaid(t){if(this.editMode){let s=this.getIndex(t);-1===s?this.addRaid(t,this.currentList):this.currentList.splice(s,1)}else window.open("https://game.granbluefantasy.jp/#quest/supporter/"+t,"gbf")},addRaid(t,s){if(this.getRaids.hasOwnProperty(t)){let e=i.A.copy(this.getRaids[t]);e.times=e.times||this.getCategories[e.category].times,e.remaining=e.times,s.push(e)}},undoRaid(){if(this.currentListRaidIndex>0){this.currentListRaidIndex--;let t=this.currentList[this.currentListRaidIndex];t.remaining=t.times}},launchRaid(){if(this.currentListRaidIndex<this.currentList.length){let t=this.currentList[this.currentListRaidIndex];t.remaining--,t.remaining<1&&this.skipRaid(),window.open("https://game.granbluefantasy.jp/#quest/supporter/"+t.id,"gbf")}},skipRaid(){this.currentListRaidIndex<this.currentList.length&&this.currentListRaidIndex++},resetRaid(){this.currentList.forEach(t=>t.remaining=t.times),this.currentListRaidIndex=0},getIndex(t){return this.currentList.findIndex(s=>s.id===t)},getIndexString(t){const s=this.getIndex(t);return s>=0?s+1:"."},clickListSave(){let t=[];this.my_lists.forEach(s=>{t.push({name:s.name,data:s.data.flatMap(t=>[{id:t.id}])})}),this.axios.post("/daily/save",t).then(t=>this.$store.dispatch("addMessage",{message:"Lists saved successfully"})).catch(t=>this.$store.dispatch("addAxiosErrorMessage",t))},clickListNew(){this.my_lists.push(new r("List "+(this.my_lists.length+1),[])),this.current_list_index=this.my_lists.length-1},clickListDelete(){this.current_list_index>0&&(this.my_lists.splice(this.current_list_index,1),this.current_list_index=0)},loadServerLists(){if(!1===this.list_fetched)return this.axios.get("/daily/load").then(t=>{if(null!==t.data){let s=[];t.data.forEach(t=>{let e=new r(t.name,[]);t.data.forEach(t=>this.addRaid(t.id,e.data)),s.push(e)}),this.$set(this,"my_lists",s),this.current_list_index=0,this.list_fetched=!0}}).catch(t=>this.$store.dispatch("addAxiosErrorMessage",t))},loadList(){if(this.isUserLogged)this.loadServerLists();else{this.$store.commit("daily_grind/resetMyLists");const t=u.fetchValue("currentListIds");void 0!==t&&t.forEach(t=>this.addRaid(t.id,this.my_lists[0].data))}}},computed:{my_lists:{get(){return this.$store.state.daily_grind.my_lists},set(t){this.$store.commit("daily_grind/setMyLists",t)}},current_list_index:{get(){return this.$store.state.daily_grind.current_list_index},set(t){this.$store.commit("daily_grind/setCurrentListIndex",t)}},list_fetched:{get(){return this.$store.state.daily_grind.list_fetched},set(t){this.$store.commit("daily_grind/setListFetched",t)}},isUserLogged(){return null!==this.$store.getters.getUserId},getContent(){return this.content},getCategories:()=>g,getRaids(){let t={};for(let[s,e]of Object.entries(this.getCategories))for(let[a,n]of Object.entries(e.raids))t[a]=i.A.copy(n),t[a].id=a,t[a].category=parseInt(s,10);return t},getTotalAP(){if(0===this.currentList.length)return 0;let t=0;return this.currentList.slice(this.currentListRaidIndex).forEach(s=>{let e=0;e=this.isMagfes?s.magfes?s.magfes:this.getCategories[s.category].magfes:s.cost?s.cost:this.getCategories[s.category].cost,t+=e*s.remaining}),t},currentList(){return this.my_lists[this.current_list_index].data},currentListIds(){return this.currentList.flatMap(t=>[{id:t.id}])},currentListRaidIndex:{get(){return this.my_lists[this.current_list_index].raid_index},set(t){this.my_lists[this.current_list_index].raid_index=t}},remainingList(){return this.currentList.slice(this.currentListRaidIndex)},currentListName:{get(){return this.my_lists[this.current_list_index].name},set(t){this.my_lists[this.current_list_index].name=t}}},watch:{"$store.getters.getUserId"(){this.list_fetched=!1,this.loadList()},isMagfes(){u.setValue("isMagfes",this)},showTab(){u.setValue("showTab",this)},renameLists(){u.setValue("renameLists",this)},currentList(){this.isUserLogged||u.setValue("currentListIds",this)}},serverPrefetch(){if(this.isUserLogged)return this.loadServerLists()},mounted(){u.getValue(this,"isMagfes"),u.getValue(this,"showTab"),u.getValue(this,"renameLists"),this.loadList()}},m=_,f=(0,e(4486).A)(m,function(){var t=this,s=t._self._c;return s("div",{staticClass:"flex flex-col"},[s("h1",{staticClass:"self-center"},[t._v("Daily Grind Lists")]),s("div",{staticClass:"flex flex-row flex-wrap py-2 gap-2"},[s("button",{staticClass:"btn",class:t.show_help?"btn-blue":"btn-white",on:{click:function(s){t.show_help=!t.show_help}}},[s("fa-icon",{staticClass:"text-xl",attrs:{icon:["fas","info-circle"]}}),t._v(" Usage ")],1),s("checkbox",{model:{value:t.isMagfes,callback:function(s){t.isMagfes=s},expression:"isMagfes"}},[t._v("MagnaFest")]),s("checkbox",{model:{value:t.editMode,callback:function(s){t.editMode=s},expression:"editMode"}},[t._v("Edit mode")]),s("checkbox",{model:{value:t.renameLists,callback:function(s){t.renameLists=s},expression:"renameLists"}},[t._v("Rename lists")])],1),t.show_help?s("div",{staticClass:"bg-secondary self-center rounded p-4 mb-2"},[s("h2",[t._v("Launch Raids")]),t._m(0),s("h2",[t._v("Edit Mode")]),s("p",{staticClass:"pb-4"},[t._v(' Enable Edit Mode to add raids to a list. From the "All Content" tab, click on each raid you want to add to the list. The order of the raid in the list in shown on the left of each box. ')]),s("h2",[t._v("List managment")]),s("p",{staticClass:"pb-4"},[t._v(' You can manage multiple lists with different raids in each. Simply select the one you want to use. Lists can be created, renamed or deleted. Clicking the "Save All" button saves all the lists at once. ')])]):t._e(),t.isUserLogged?s("div",[s("div",{staticClass:"flex flex-row flex-wrap items-center gap-2"},[s("div",{staticClass:"relative"},[s("dropdown",{staticClass:"w-64",model:{value:t.current_list_index,callback:function(s){t.current_list_index=t._n(s)},expression:"current_list_index"}},t._l(t.my_lists,function(e,i){return s("option",{key:i,domProps:{value:i}},[t._v(t._s(e.name))])}),0),t.renameLists?s("div",{staticClass:"absolute top-0 left-0"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.currentListName,expression:"currentListName"}],staticClass:"input border-none focus:shadow-none ml-2 p-0",staticStyle:{width:"14rem"},attrs:{type:"text",placeholder:"Default list"},domProps:{value:t.currentListName},on:{input:function(s){s.target.composing||(t.currentListName=s.target.value)}}})]):t._e()],1),s("button",{staticClass:"btn btn-blue",on:{click:function(s){return t.clickListSave()}}},[s("fa-icon",{staticClass:"text-xl",attrs:{icon:["fas","save"]}}),t._v(" Save All ")],1),s("button",{staticClass:"btn btn-blue",on:{click:function(s){return t.clickListNew()}}},[s("fa-icon",{staticClass:"text-xl",attrs:{icon:["fas","file"]}}),t._v(" New List ")],1),s("button",{staticClass:"btn btn-red",attrs:{disabled:0===t.current_list_index},on:{click:function(s){return t.clickListDelete()}}},[s("fa-icon",{staticClass:"text-xl",attrs:{icon:["fas","trash"]}}),t._v(" Delete List ")],1)])]):t._e(),s("div",{staticClass:"flex flex-row border-primary border-b pt-4 font-bold"},[s("a",{staticClass:"px-4 py-2 text-primary cursor-pointer rounded-t",class:0===t.showTab?"bg-secondary":"",on:{click:function(s){t.showTab=0}}},[t._v("All Content")]),s("a",{staticClass:"px-4 py-2 text-primary cursor-pointer rounded-t",class:1===t.showTab?"bg-secondary":"",on:{click:function(s){t.showTab=1}}},[t._v("My List")])]),0===t.showTab?s("div",t._l(t.getContent,function(e){return s("div",{key:e.name},[s("h2",{staticClass:"py-4 cursor-pointer",on:{click:function(t){e.show=!e.show}}},[e.show?s("fa-icon",{attrs:{icon:["fas","angle-down"]}}):s("fa-icon",{attrs:{icon:["fas","angle-right"]}}),t._v(" "+t._s(e.name)+" ")],1),!0===e.show?s("span",[s("table",{staticClass:"table-auto"},[t._m(1,!0),s("tbody",t._l(e.data,function(e,i){return s("tr",{key:i,staticClass:"flex flex-col md:table-row md:flex-none"},[s("td",{staticClass:"pr-2 whitespace-nowrap"},[s("span",{staticClass:"pr-2"},[t._v(t._s(e.name))]),s("span",{staticClass:"flex flex-row"},[e.times?s("span",{staticClass:"tag bg-tertiary mr-1"},[t._v("x"+t._s(e.times))]):t._e(),e.cost?s("span",{staticClass:"tag bg-tertiary"},[t._v(t._s(t.isMagfes?e.magfes:e.cost)+" AP")]):t._e()])]),s("td",{staticClass:"flex flex-row flex-wrap select-none py-1 border-b border-secondary"},t._l(e.raids,function(e,i){return s("a",{key:i,staticClass:"p-1 cursor-pointer",on:{click:function(s){return t.clickRaid(i)}}},[s("div",{staticClass:"rounded flex flex-col items-center bg-secondary text-primary hover:bg-tertiary"},[s("div",{staticClass:"flex flex-row"},[e.icon?s("img",{staticStyle:{"max-height":"50px","max-width":"50px"},attrs:{src:"/img/item/"+e.icon+".jpg"}}):t._e(),s("div",{staticClass:"flex flex-col py-3 px-4"},[s("span",{staticClass:"flex flex-row justify-around"},[t.editMode?s("span",{staticClass:"tag text-center inline-block text-inverse mr-1",class:t.getIndex(i)>=0?"bg-inverse":"bg-tertiary",staticStyle:{"min-width":"2rem"}},[t._v(t._s(t.getIndexString(i)))]):t._e(),s("span",[t._v(t._s(e.name))])]),s("span",{staticClass:"flex flex-row justify-around"},[e.times?s("span",{staticClass:"tag bg-tertiary mr-1 mt-1"},[t._v("x"+t._s(e.times))]):t._e(),e.cost?s("span",{staticClass:"tag bg-tertiary mt-1"},[t._v(t._s(t.isMagfes?e.magfes:e.cost)+" AP")]):t._e()])])])])])}),0)])}),0)])]):t._e()])}),0):t._e(),1===t.showTab?s("div",{staticClass:"flex flex-col mt-4"},[s("span",{staticClass:"font-semibold"},[t._v("AP needed: "+t._s(t.getTotalAP))]),s("div",{staticClass:"flex flex-row flex-wrap gap-2 my-4"},[s("button",{staticClass:"btn btn-blue",attrs:{disabled:0===t.currentListRaidIndex},on:{click:function(s){return t.undoRaid()}}},[t._v("Undo")]),s("button",{staticClass:"btn btn-blue",attrs:{disabled:0===t.remainingList.length},on:{click:function(s){return t.launchRaid()}}},[t._v("Launch Raid")]),s("button",{staticClass:"btn btn-blue",attrs:{disabled:0===t.remainingList.length},on:{click:function(s){return t.skipRaid()}}},[t._v("Skip")])]),t._l(t.remainingList,function(e){return s("span",{key:e.id,staticClass:"mb-1"},[s("span",{staticClass:"tag bg-inverse text-inverse mr-1"},[t._v("x"+t._s(e.remaining))]),e.icon?s("img",{staticClass:"vcenter-img",staticStyle:{"max-height":"25px","max-width":"25px"},attrs:{src:"/img/item/"+e.icon+".jpg"}}):t._e(),t._v(" "+t._s(e.name)+" "),t.getCategories[e.category].name.length>0?s("span",{staticClass:"tag bg-tertiary"},[t._v(t._s(t.getCategories[e.category].name))]):t._e(),s("br")])}),s("span",{staticClass:"mt-4"},[s("button",{staticClass:"btn btn-red",attrs:{disabled:0===t.currentListRaidIndex},on:{click:function(s){return t.resetRaid()}}},[t._v("Reset")])])],2):t._e()])},[function(){var t=this,s=t._self._c;return s("p",{staticClass:"pb-4"},[t._v(' From the "All Content" tab, you can click on any raid to launch it directly in the Granblue Fantasy Tab. Keep this tab open, all the raids will open in the same one.'),s("br"),t._v(' From the "My List" tab, simply click on "Launch Raid" to start the first raid on the list. Click again to start the next one, until the list is empty.'),s("br"),t._v(' You can then click on "Reset" to display the whole list again. ')])},function(){var t=this._self._c;return t("thead",[t("tr",[t("th"),t("th",{staticClass:"md:w-full"})])])}],!1,null,null,null).exports}}]);