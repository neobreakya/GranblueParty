"use strict";(self.webpackChunkgbf_frontend=self.webpackChunkgbf_frontend||[]).push([[711],{184(t,s,e){e.r(s),e.d(s,{default:()=>m});var o=e(9204),a=e(253),i=e(8252),n=e(1489),r=e(951);const l={namespaced:!0,state:()=>({id:0,userId:null,summons:[{},{},{},{},{},{},{},{},{},{},{},{},{},{}],updated:0,found:!0}),mutations:{setId(t,s){t.id=s}},actions:{loadSummons({state:t},s){if(s){if(s!==t.userId)return Object.assign(t,{id:0,userId:null,summons:[{},{},{},{},{},{},{},{},{},{},{},{},{},{}],updated:0,found:!0}),this.axios.get("/friendsum/load/"+s).then(e=>{for(;e.data.data.length<t.summons.length;)e.data.data.push({});t.summons=e.data.data,t.id=e.data.gbfid,t.updated=e.data.updated,t.found=!0,t.userId=s}).catch(e=>{t.found=!1,t.userId=s})}else Object.assign(t,{id:0,userId:null,summons:[{},{},{},{},{},{},{},{},{},{},{},{},{},{}],updated:0,found:!0})}}},d=(0,r.gq)("friends",l),c=[{name:"Name",isColumn:!0,isFilter:!1,key:"n"},{name:"Rarity",isColumn:!0,isFilter:!0,key:"ri"},{name:"Element",isColumn:!0,isFilter:!0,key:"e"}],u={components:{BoxSummon:i.A,Modal:n.A},mixins:[d],head:{title:"Granblue.Party - Friend Summons",desc:"Share your Friend summons and User ID",image:"https://www.granblue.party/img/card_friendsum.jpg",keywords:"friend summons, share"},data:()=>({clipboard_text:"",show_help:!1,show_modal:!1,selected_box_index:0,data_model:{e:o.A.copy(a.A.e)},loading:!0}),methods:{showModal(t){this.selected_box_index=t,t>7&&(t-=8),t<6?(this.data_model.e.data.forEach(t=>t.checked=!1),this.data_model.e.data[t].checked=!0):this.data_model.e.data.forEach(t=>t.checked=!0),this.show_modal=!0},changeObject(t){const s=this.selected_box_index;o.A.isEmpty(t)?this.$set(this.summons,s,{}):this.axios.get("/party/summons/"+t).then(t=>this.$set(this.summons,s,t.data)).catch(t=>this.$store.dispatch("addAxiosErrorMessage",t))},clickCopyURL(){const t=window.location.href+"/"+this.$store.getters.getUserId+"#";this.clipboard_text=t;let s=this;this.$nextTick().then(t=>{document.getElementById("clipboardInput").select(),document.execCommand("copy"),s.clipboard_text="",s.$store.dispatch("addMessage",{message:"URL copied to clipboard"})})},clickSave(){let t={gbfid:this.id,data:[]};this.summons.forEach(s=>{o.A.isEmpty(s)?t.data.push(null):t.data.push({id:s.summonid,uncap:s.stars})}),this.axios.post("/friendsum/save",t).then(t=>this.$store.dispatch("addMessage",{message:"Data saved successfully"})).catch(t=>this.$store.dispatch("addAxiosErrorMessage",t))},loadCollection(){return this.isOwnProfile?this.$store.commit("setPartyMode",this.$MODE.Edit):this.$store.commit("setPartyMode",this.$MODE.ReadOnly),this.$store.dispatch("friends/loadSummons",this.userId)}},computed:{id:{get(){return this.$store.state.friends.id},set(t){this.$store.commit("friends/setId",t)}},userId(){return this.isOwnProfile?this.$store.getters.getUserId:this.$route.params.friend_id},summons(){return this.$store.state.friends.summons},found(){return this.$store.state.friends.found},updated(){return this.$store.state.friends.updated},categories:()=>c,isOwnProfile(){return void 0===this.$route.params.friend_id}},watch:{"$store.getters.getUserId"(t){this.loading=!0,this.loadCollection().then(t=>this.loading=!1)},$route(t,s){this.loading=!0,this.loadCollection().then(t=>this.loading=!1)}},serverPrefetch(){return this.loadCollection().then(t=>{this.found&&(this.$ssrContext.head_image="https://www.granblue.party/previews/friendsum/friendsum_"+this.userId+"."+this.updated+".jpg")})},async mounted(){await this.loadCollection().then(t=>this.loading=!1)}},m=(0,e(4486).A)(u,function(){var t=this,s=t._self._c;return s("div",{staticClass:"flex flex-col"},[!0===t.loading?s("div",[t._v(" Loading... ")]):t.found||t.isOwnProfile?s("div",{staticClass:"flex flex-col items-center"},[t.isOwnProfile?s("h1",{staticClass:"self-center mb-8"},[t._v("My Friend Summons")]):s("h1",{staticClass:"self-center mb-8"},[t._v("Friend Summons for Player ID: "+t._s(t.id))]),t.isOwnProfile?s("div",{staticClass:"flex flex-row flex-wrap gap-2"},[s("button",{staticClass:"btn",class:t.show_help?"btn-blue":"btn-white",on:{click:function(s){t.show_help=!t.show_help}}},[s("fa-icon",{staticClass:"text-xl",attrs:{icon:["fas","info-circle"]}}),t._v(" Usage ")],1),t.userId?s("button",{staticClass:"btn btn-blue",on:{click:t.clickCopyURL}},[s("fa-icon",{staticClass:"text-xl",attrs:{icon:["fas","share-alt"]}}),t._v(" Share ")],1):t._e(),t.userId?s("button",{staticClass:"btn btn-blue",on:{click:function(s){return t.clickSave()}}},[s("fa-icon",{staticClass:"text-xl",attrs:{icon:["fas","save"]}}),t._v(" Save ")],1):t._e(),s("label",[t._v("My ID "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.id,expression:"id"}],staticClass:"input is-small",staticStyle:{width:"15ch"},attrs:{type:"number",min:"1"},domProps:{value:t.id},on:{input:function(s){s.target.composing||(t.id=s.target.value)}}})])]):t._e(),t.show_help?s("div",{staticClass:"bg-secondary rounded p-4 mt-4 shrink"},[s("h2",[t._v("Click on the stars")]),s("p",{staticClass:"pb-4"},[t._v(" You can set the uncap level of the summons by clicking on the stars. ")]),s("h2",[t._v("Share your summons")]),t._m(0)]):t._e(),s("div",{staticClass:"flex flex-row flex-wrap self-center my-8"},[s("div",{staticClass:"flex flex-col items-center mr-4"},[s("span",{staticClass:"px-3 py-1 my-1 rounded-full text-white bg-red-600"},[t._v("Fire")]),s("box-summon",{attrs:{object:t.summons[0],showLevel:!1},on:{"click-portrait":function(s){return t.showModal(0)}}}),s("box-summon",{attrs:{object:t.summons[8],showLevel:!1},on:{"click-portrait":function(s){return t.showModal(8)}}})],1),s("div",{staticClass:"flex flex-col items-center mr-4"},[s("span",{staticClass:"px-3 py-1 my-1 rounded-full text-white bg-blue-600"},[t._v("Water")]),s("box-summon",{attrs:{object:t.summons[3],showLevel:!1},on:{"click-portrait":function(s){return t.showModal(3)}}}),s("box-summon",{attrs:{object:t.summons[11],showLevel:!1},on:{"click-portrait":function(s){return t.showModal(11)}}})],1),s("div",{staticClass:"flex flex-col items-center mr-4"},[s("span",{staticClass:"px-3 py-1 my-1 rounded-full text-white bg-amber-800"},[t._v("Earth")]),s("box-summon",{attrs:{object:t.summons[2],showLevel:!1},on:{"click-portrait":function(s){return t.showModal(2)}}}),s("box-summon",{attrs:{object:t.summons[10],showLevel:!1},on:{"click-portrait":function(s){return t.showModal(10)}}})],1),s("div",{staticClass:"flex flex-col items-center mr-4"},[s("span",{staticClass:"px-3 py-1 my-1 rounded-full text-white bg-emerald-600"},[t._v("Wind")]),s("box-summon",{attrs:{object:t.summons[1],showLevel:!1},on:{"click-portrait":function(s){return t.showModal(1)}}}),s("box-summon",{attrs:{object:t.summons[9],showLevel:!1},on:{"click-portrait":function(s){return t.showModal(9)}}})],1),s("div",{staticClass:"flex flex-col items-center mr-4"},[s("span",{staticClass:"px-3 py-1 my-1 rounded-full text-black bg-amber-400"},[t._v("Light")]),s("box-summon",{attrs:{object:t.summons[4],showLevel:!1},on:{"click-portrait":function(s){return t.showModal(4)}}}),s("box-summon",{attrs:{object:t.summons[12],showLevel:!1},on:{"click-portrait":function(s){return t.showModal(12)}}})],1),s("div",{staticClass:"flex flex-col items-center mr-4"},[s("span",{staticClass:"px-3 py-1 my-1 rounded-full text-white bg-violet-600"},[t._v("Dark")]),s("box-summon",{attrs:{object:t.summons[5],showLevel:!1},on:{"click-portrait":function(s){return t.showModal(5)}}}),s("box-summon",{attrs:{object:t.summons[13],showLevel:!1},on:{"click-portrait":function(s){return t.showModal(13)}}})],1),s("div",{staticClass:"flex flex-col items-center mr-4"},[s("span",{staticClass:"px-3 py-1 my-1 rounded-full text-black bg-white"},[t._v("Misc")]),s("box-summon",{attrs:{object:t.summons[6],showLevel:!1},on:{"click-portrait":function(s){return t.showModal(6)}}}),s("box-summon",{attrs:{object:t.summons[7],showLevel:!1},on:{"click-portrait":function(s){return t.showModal(7)}}})],1)]),s("modal",{attrs:{route:"/party/summons",categories:t.categories,dataModel:t.data_model},on:{"item-selected":t.changeObject},model:{value:t.show_modal,callback:function(s){t.show_modal=s},expression:"show_modal"}}),s("input",{directives:[{name:"show",rawName:"v-show",value:t.clipboard_text.length>0,expression:"clipboard_text.length > 0"}],attrs:{id:"clipboardInput",readonly:"",type:"text"},domProps:{value:t.clipboard_text}})],1):s("div",{staticClass:"flex flex-col items-center"},[s("h1",{staticClass:"self-center mb-8"},[t._v("No Friend Summons found")])])])},[function(){var t=this,s=t._self._c;return s("p",[t._v(' You can share your Friend summons by clicking "Save", then "Share".'),s("br"),t._v(" You need an account to use this feature. ")])}],!1,null,null,null).exports}}]);