"use strict";(self.webpackChunkgbf_frontend=self.webpackChunkgbf_frontend||[]).push([[644],{6183(e,t,s){s.r(t),s.d(t,{default:()=>o});const a={components:{ModalConfirm:s(555).A},head:{title:"Granblue.Party - My Account"},data:()=>({email:null,show_modal_delete:!1}),methods:{changeEmail(){this.axios.post("/user/email",{email:this.email}).then(e=>{this.$store.commit("setEmail",this.email),this.$store.dispatch("addMessage",{message:"Email saved successfully"})}).catch(e=>this.$store.dispatch("addAxiosErrorMessage",e))},deleteAccount(){this.axios.post("/user/delete").then(e=>{this.$store.commit("logout"),this.$router.push({name:"home"})}).catch(e=>this.$store.dispatch("addAxiosErrorMessage",e))}},computed:{emailModified(){return this.$store.getters.getEmail!=this.email}},mounted(){this.email=this.$store.getters.getEmail},watch:{"$store.getters.getUserId"(e){null===e&&this.$router.push({name:"home"}).catch(()=>{})}}},o=(0,s(4486).A)(a,function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex flex-col items-center gap-y-8"},[t("h1",[e._v("My account")]),t("form",{staticClass:"grid auto-cols-min",on:{submit:function(t){return t.preventDefault(),e.changeEmail()}}},[t("label",{attrs:{for:"username"}},[e._v("Username")]),t("input",{staticClass:"input",attrs:{id:"username",type:"text",disabled:""},domProps:{value:e.$store.getters.getUsername}}),t("label",{attrs:{for:"email"}},[e._v("Email address (optional)")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],ref:"email",staticClass:"input",attrs:{id:"email",type:"email",placeholder:"Email address"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),t("p",{staticClass:"mt-4"},[t("input",{staticClass:"btn btn-blue",attrs:{type:"submit",value:"Save",disabled:!e.emailModified}})])]),e._m(0),e._m(1),t("button",{staticClass:"btn btn-red",on:{click:function(t){e.show_modal_delete=!0}}},[e._v("Delete account")]),t("modal-confirm",{attrs:{confirm:e.deleteAccount,text:"This action cannot be reverted",button:"Delete account"},model:{value:e.show_modal_delete,callback:function(t){e.show_modal_delete=t},expression:"show_modal_delete"}})],1)},[function(){var e=this,t=e._self._c;return t("p",{staticClass:"bg-secondary rounded p-4"},[e._v(' To reset your password, log out, then in the "Log in" panel,'),t("br"),e._v(' click on "Forgot password?" to receive a link to change your password. ')])},function(){var e=this,t=e._self._c;return t("p",{staticClass:"bg-secondary rounded p-4"},[e._v(" We will never send you spam or sell your email address."),t("br"),e._v(" Its only use is to recover your password if you forget it. ")])}],!1,null,null,null).exports}}]);